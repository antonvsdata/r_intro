# Tunnusluvut {#statistics}

Tunnusluvut (engl. statistics) ovat keskeinen osa tilastotiedettä. Tunnuslukujen avulla voidaan tiivistää ja tarkastella aineistoa. Tässä harjoittelemme tyypillisimpien tunnuslukujen laskemista aineistosta. Näitä tunnuslukuja voi sanoa myös empiirisiksi, koska ne on laskettu aineistosta.

## Sijaintia kuvaavat tunnusluvut

### Minimi ja maksimi
Minimi tarkoittaa aineiston pienintä arvoa kyseiselle muuttujalle. Maksimi on vastaavasti suurin arvo. Minimi ja maksimi on periaatteessa helppoa laskea funktioiden ```min``` ja ```max``` avulla, mutta pari pientä sudenkuoppaa niihinkin liittyy. Funktiot ```min``` ja ```max``` hyväksyvät argumenteikseen vain numeeriset vektorit.

```{r}
dat_for_loc <- c(-1.25, -4.1, 1.16, -3.05, 4.17, 0.73, -3.14, 3.39, -2.55, 0.4)
min(dat_for_loc)
max(dat_for_loc)
```

Joskus minimiä ja maksimia tarvitsee tilanteessa, jossa halutaan vaikkapa muuttaa kaikki negatiiviset arvot nolliksi (tai positiiviset, jos maksimi). Tämä onnistuu helpoiten funktioiden ```pmin``` ja ```pmax``` avulla. Samalla tapaa, jos halutaan kaikki lukua 1 pienemmät luvut muutettua luvuksi 1, niin tämä onnistuu vaihtamalla luku 0 lukuun 1. 
```{r}
# We want to get rid of all values below 0 and make them 0
pmin(dat_for_loc,0)
# Similar, but get rid of all values over 0
pmax(dat_for_loc,0)

# We can do similar things to any limit, e.g. 1
pmin(dat_for_loc,1)
```
Funktiota ```pmin``` ja ```pmax``` voi käyttää vieläkin yleisemmässä muodossa antamalla yksittäisen lukuarvon sijasta vektorin. Näitä emme käsittele tässä, mutta kiinnostuneet voivat kokeilla lisää itse.

### Keskiarvo

Keskiarvo saadaan laskemalla muuttujan kaikki havainnot yhteen ja jakamalla summa havaintojen määrällä. Esimerkiksi aineiston 1,2,3,4 keskiarvo on (1+2+3+4)/4 = 2.5 Keskiarvoa satunnaismuuttujan $X$ havainnoille voidaan merkitä matemaattisesti seuraavasti
$$\overline{x} = \sum_{i=1}^n x_i = \frac{x_1+x_2+\dots+x_n}{n},$$
missä merkintä $\overline{x}$ tarkoittaa itse keskiarvoa, $x_1,...,x_n$ ovat havaintoja ja $n$ on laskettavien havaintojen määrä.

R:ssä keskiarvo voidaan laskea helposti funktiolla ```mean```.

```{r}
tooth_length <- ToothGrowth$len
mean(tooth_length)
```

Mikäli muuttujassa on puuttuvia arvoja (NA) niin keskiarvoksi tulee oletusarvoisesti NA. NA-arvot voi jättää pois keskiarvon laskemisessa antamalla funktiolle lisäargumentiksi ```na.rm=TRUE```.

```{r}
# Create some data
dat_for_mean <- c(1, 2, NA, 4)
# Data with NA results mean with NA
mean(dat_for_mean)
# Leave NA-values out and calculate mean from the remaining ones
mean(dat_for_mean,na.rm=TRUE)
```

### Mediaani

Mediaani ilmaisee aineiston keskimmäisen luvun. Toisin sanoen puolet havainnoista on mediaania suurempia ja puolet mediaania pienempiä. Esimerkiksi aineiston 1,1,2,3,5 mediaani on 2. Jos aineistossa on parillinen määrä lukuja otetaan kaksi keskimmäisä ja lasketaan ne yhteen ja jaetaan kahdella (keskiarvo). Aineiston 3,3,5,6,7,17 mediaani on (5+6)/2 = 5.5. Mediaani on helppoa laskea R:ssä funktiolla median.


```{r}
# Let's think about median
dat_for_median <- c(7, 2, 3, 4, 1, 7, 0, 4, 3, 3, 2, 6)
dat_for_median
sort(dat_for_median) # Median would be the middle value in the arranged data, thus 3

# Getting median in R
median(dat_for_median)
```

### Moodi

Moodi ilmaisee muuttujan yleisimmän arvon. Valitettavasti R:ssä ei ole valmista funktiota moodin laskemiseen. Sen sijaan funktio nimeltään ```mode``` antaa objektin tyypin, eikä laske moodia. Jos moodin haluaa laskea R:ssä, on se tehtävä laskemalla ensin aineistosta taulukko ja sitten etsimällä siitä maksimiarvo.
```{r}
# Find out the mode
dat_for_mode <- c(7, 2, 3, 4, 1, 7, 0, 4, 3, 3, 2, 6, 1, 3, 3, 1, 6, 0, 1, 3, 0, 6, 4, 2, 3, 2, 2, 7, 3, 1, 5, 3, 4, 3, 3, 2, 2, 4, 2, 1, 5, 3, 2, 2, 2, 3, 4, 2, 5, 3, 4, 2, 1, 4, 2, 3, 1, 1, 4, 3, 2, 3, 5, 4, 4, 4, 1, 3, 1, 3, 5, 2, 3, 1, 4, 2, 4, 2, 1, 0, 3, 3, 3, 3, 4, 4, 4, 3, 4, 4, 2, 1, 2, 4, 4, 4, 6, 2, 3, 2)
tab <- table(dat_for_mode)
# Let's see how is tab
tab
# Let's pick up the largest frequency using which.max function
tab[which.max(tab)]
# Mode is 3 and the frequency is 26

# Let's pick up only the value 3
names(tab)[which.max(tab)]
# That is character so let's convert it to numeric
as.numeric(names(tab)[which.max(tab)])
```

Ylläoleva käy itse asiassa hyvästä esimerkistä tilanteesta, jossa seuraavaksi tekisin viimeisen rivin funktioksi ja jatkossa käyttäisin kyseistä funktiota työssäni. Funktiohin palataan osiossa [Funktiot](#functions). En malta olla tekemättä niin, joten olkoon alla esimerkki moodi-funktiosta ilman suurempia selityksiä.

```{r}
# Write a function for mode
moodi <- function(x) {
  tab <- table(x)
  as.numeric(names(tab)[which.max(tab)])
}
# Use that function
moodi(dat_for_mode)
```


## summary()

Kätevä tapa saada nopea yhteenveto data framen kaikista muuttujista on käyttää ```summary```-funktiota data frame -objektille.

```{r}
# Calculate summary for ToothGrowth data
summary(ToothGrowth)
```
Summary huolii myös yksittäisen vektorin, jolloin yhteenveto tulostuu vaakasuuntaisena.
```{r}
tooth_length <- ToothGrowth$len
summary(tooth_length)
```


## Varianssi ja keskihajonta ja kvantiilit

